<div class="container" id="model-config-container">
  <h1>Model Configuration</h1>
  <p class="text-muted mb-4">
    Decide the configuration for your CNN image classification model. Defines
    how your model behaves.
  </p>

  <form method="POST" class="model-config-form mb-4">
    <!-- Convolutional Layers -->
    <div class="form-group collapsible-section" id="conv-layers-section">
      <!-- Header and info toggle -->
      <div
        class="section-header"
        onclick="toggleSection('conv-layers-section')"
      >
        <h3>Convolutional Layers</h3>
        <div class="info-toggle-container">
          <a
            href="#"
            class="info-toggle"
            data-target="size-info"
            onclick="toggleDefinition(event, 'conv-info'); event.stopPropagation();"
          >
            <i class="fas fa-question-circle"></i>
          </a>
        </div>
      </div>

      <div
        id="conv-info"
        class="definition definition-info"
        style="display: none"
      >
        <p>Info coming here...</p>
      </div>

      <div class="collapsible-content">
        <p class="text-muted mt-2">
          Perform feature extraction by sliding a small filter/kernel across the
          images (will add more info to all...)
        </p>
        <div id="conv-layers-container">
          <div class="conv-layer mb-4">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Filters:</label>
                  <input
                    type="number"
                    name="filters[]"
                    min="16"
                    max="512"
                    value="32"
                    required
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Kernel size:</label>
                  <select name="kernel_size[]">
                    <option value="3">3x3 (standard)</option>
                    <option value="5">5x5</option>
                    <option value="7">7x7</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Padding:</label>
                  <select name="padding[]">
                    <option value="same">Same</option>
                    <option value="valid">Valid (reduce size)</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Activation:</label>
                  <select name="activation[]">
                    <option value="relu">ReLU</option>
                    <option value="leaky_relu">Leaky ReLU</option>
                    <option value="elu">ELU</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button
          type="button"
          class="btn btn-secondary"
          onclick="addConvLayer()"
        >
          Add another convolutional layer
        </button>
      </div>
    </div>

    <!-- Pooling Configuration -->
    <div class="form-group collapsible-section" id="pooling-section">
      <!-- Header and info toggle-->
      <div class="section-header" onclick="toggleSection('pooling-section')">
        <h3>Pooling Configuration</h3>
        <div class="info-toggle-container">
          <a
            href="#"
            class="info-toggle"
            data-target="pooling-info"
            onclick="toggleDefinition(event, 'pooling-info'); event.stopPropagation();"
          >
            <i class="fas fa-question-circle"></i>
          </a>
        </div>
      </div>

      <div
        id="pooling-info"
        class="definition definition-info"
        style="display: none"
      >
        <p>Info coming here...</p>
      </div>

      <div class="collapsible-content">
        <p class="text-muted mt-2">Reduces the size of the data...</p>
        <div class="row">
          <div class="col-md-6">
            <label>Pooling Type:</label>
            <select name="pool_type">
              <option value="max">Max Pooling</option>
              <option value="avg">Average Pooling</option>
            </select>
          </div>
          <div class="col-md-6">
            <label>Pool Size:</label>
            <select name="pool_size">
              <option value="2">2x2 (standard)</option>
              <option value="3">3x3</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Regularization -->
    <div class="form-group collapsible-section" id="regularization-section">
      <!-- Header and info toggle  check size info... -->
      <div
        class="section-header"
        onclick="toggleSection('regularization-section')"
      >
        <h3>Regularization</h3>
        <div class="info-toggle-container">
          <a
            href="#"
            class="info-toggle"
            data-target="size-info"
            onclick="toggleDefinition(event, 'regularization-info'); event.stopPropagation();"
          >
            <i class="fas fa-question-circle"></i>
          </a>
        </div>
      </div>

      <div
        id="regularization-info"
        class="definition definition-info"
        style="display: none"
      >
        <p>Info coming here...</p>
      </div>

      <div class="collapsible-content">
        <p class="text-muted mt-2">
          Helps prevent overfitting by randomly disabling neurons during
          training....
        </p>
        <label>Dropout Rate:</label>
        <select name="dropout_rate" class="form-control">
          <option value="0.2">0.2</option>
          <option value="0.5" selected>0.5 (standard)</option>
          <option value="0.7">0.7</option>
        </select>
      </div>
    </div>

    <!-- Dense layers -->
    <div class="form-group collapsible-section" id="dense-layer-section">
      <!-- Header and info toggle  check size info... -->
      <div
        class="section-header"
        onclick="toggleSection('dense-layer-section')"
      >
        <h3>Dense Layers</h3>
        <div class="info-toggle-container">
          <a
            href="#"
            class="info-toggle"
            data-target="size-info"
            onclick="toggleDefinition(event, 'dense-layer-info'); event.stopPropagation();"
          >
            <i class="fas fa-question-circle"></i>
          </a>
        </div>
      </div>

      <div
        id="dense-layer-info"
        class="definition definition-info"
        style="display: none"
      >
        <p>Info coming here...</p>
      </div>

      <div class="collapsible-content">
        <p class="text-muted mt-2">Connects the layers...</p>
        <div id="dense-layer-container">
          <div class="dense-layer mb-3">
            <label>Units:</label>
            <input
              type="number"
              name="dense_units[]"
              min="32"
              max="1024"
              value="128"
              required
            />
          </div>
        </div>
        <button
          type="button"
          class="btn btn-secondary"
          onclick="addDenseLayer()"
        >
          Add dense layer
        </button>
      </div>
    </div>

    <button type="submit" class="btn btn-success mt-4">
      Configure model and continue to training configuration
    </button>
  </form>
</div>
